function prikaziProizvodeUKorpi(){$.ajax({url:"assets/data/products.json",method:"GET",dataType:"json",success:function(t){let n=proizvodiUKorpi(),a=[];getTable(a=t.filter(t=>{for(let a of n)if(t.id==a.id)return t.kolicina=a.kolicina,!0;return!1}))}})}function getTable(t){let n='<table class="table table-bordered mt-3">\n    <thead>\n      <tr>\n        <th class="product-thumbnail">Fotografija</th>\n        <th class="product-thumbnail">Naziv</th> \n        <th class="product-thumbnail">Cena</th>\n        <th class="product-thumbnail">Količina</th>\n        <th class="product-thumbnail">Ukupno</th>\n        <th class="product-thumbnail">Ukloni</th>\n      </tr>\n    </thead>\n    <tbody>';t.forEach(t=>{n+=`<tr>\n        <td class="product-thumbnail">\n          <img src="${t.slika}" alt="${t.opis}" class="img-fluid imgKorpa">\n        </td>\n        <td class="product-name">\n          <h2 class="h5 text-black">${t.naziv}</h2>\n        </td>\n        <td>${t.cena} din</td>\n        <td>\n          <div class="input-group mb-3" style="max-width: 120px;">\n            <div class="input-group-prepend">\n              <button class="btn btn-outline-danger js-btn-minus" id="minus" type="button">−</button>\n            </div>\n            <input type="text" class="form-control text-center" value="4" placeholder="" aria-label="Example text with button addon" aria-describedby="button-addon1">\n            <div class="input-group-append">\n              <button class="btn btn-outline-primary js-btn-plus" id="plus" type="button">+</button>\n            </div>\n          </div>\n\n        </td>\n        <td>${4*parseInt(t.cena)} din</td>\n        <td><button class="btn btn-danger btn-sm" onclick='obrisiIzKorpe(${t.id})'>X</button></td>\n      </tr>`}),n+=" \n    </tbody>\n  </table>",$("#tabelaKorpe").html(n)}function proizvodiUKorpi(){return JSON.parse(localStorage.getItem("proizvodi"))}function dodajUkorpu(){$(".dodajUkorpu").click(function(t){t.preventDefault();let n=$(this).data("id"),a=proizvodiUKorpi();a?a.filter(t=>t.id==n).length?(alert("Proizvod se nalazi u korpi,izaberite drugi."),$(".alert").addClass("hide").slideUp()):function(){let t=proizvodiUKorpi();t.push({id:n,kolicina:1}),localStorage.setItem("proizvodi",JSON.stringify(t)),$(".alert").removeClass("hide")}():function(){let t=[];t[0]={id:n,kolicina:1},localStorage.setItem("proizvodi",JSON.stringify(t)),$(".alert").removeClass("hide")}()})}function obrisiIzKorpe(t){let n=proizvodiUKorpi().filter(function(n){if(n.id!=t)return!0});localStorage.setItem("proizvodi",JSON.stringify(n)),prikaziProizvodeUKorpi()}function praznaKorpa(){let t=document.createElement("div");t.setAttribute("id","praznaKorpa"),t.setAttribute("class","d-flex align-items-center justify-content-center ");let n=document.createElement("h1");t.append(n);n.append("Korpa je prazna"),n.setAttribute("class","font-weight-light"),$("#tabelaKorpe").html(t),$("#kupi").hide()}function zatvori(){return $(this).parent().addClass("hide")}function filterCenaRN(){$.ajax({url:"assets/data/products.json",method:"GET",dataType:"json",success:function(t){var n=$("#rnCena").val();let a=t.filter(function(t){if(parseInt(t.cena)<=parseInt(n))return t});a.length?getProducts(a):nemaProizvoda(),localStorage.setItem("cena",JSON.stringify(a))},error:function(t,n){console.log(n)}})}function izmeniCenu(){var t=$("#rnCena").val();$("#cenaIzbor").text(parseFloat(t))}function filtrirajPoMarki(){const t=this.value;$.ajax({url:"assets/data/products.json",method:"GET",dataType:"json",success:function(n){if("0"!=t){let a=n.filter(function(n){if(n.robnaMarka.naziv==t)return n});getProducts(a),localStorage.setItem("marka",JSON.stringify(a))}else getProducts(n)}})}function filtrirajPoSezoni(){const t=this.value;console.log(t),$.ajax({url:"assets/data/products.json",method:"GET",dataType:"json",success:function(n){let a,e;"0"!=t?("leto"==t&&(getProducts(a=n.filter(function(n){if("0"!=t&&n.sezona.leto)return n})),localStorage.setItem("sezona",JSON.stringify(a))),"zima"==t&&(getProducts(e=n.filter(function(n){if("0"!=t&&n.sezona.zima)return n})),localStorage.setItem("sezona",JSON.stringify(e)))):getProducts(n)}})}function prikazRobneMarke(){$.ajax({url:"assets/data/brands.json",method:"GET",dataType:"json",success:function(t){let n="",a='<option value="0">proizvođač</option>';t.forEach(t=>{n+=`<div class="col-lg-4 col-md-6 d-flex justify-content-around">\n                <img src="${t.slika}" alt="${t.naziv}" class="brend"/>\n                </div>`,a+=`<option value="${t.naziv}">${t.naziv}</option>`}),$("#marke").html(n),$("#proizvodjac").html(a)}})}function sortiraj(t){let n,a=this.value;$.ajax({url:"assets/data/products.json",method:"GET",dataType:"json",success:function(t){"0"!=a?("nazivAZ"==a&&getProducts(n=t.sort(function(t,n){return t.naziv>n.naziv?1:t.naziv<n.naziv?-1:0})),"nazivZA"==a&&getProducts(n=t.sort(function(t,n){return t.naziv>n.naziv?-1:t.naziv<n.naziv?1:0})),"cenaP"==a&&getProducts(n=t.sort(function(t,n){return parseInt(t.cena)>parseInt(n.cena)?1:parseInt(t.cena)<parseInt(n.cena)?-1:0})),"cenaR"==a&&getProducts(n=t.sort(function(t,n){return parseInt(t.cena)>parseInt(n.cena)?-1:parseInt(t.cena)<parseInt(n.cena)?1:0}))):getProducts(t)}})}function nemaProizvoda(){$("#proizvodi").html('<div id="nemaProizvoda"><h2>Nema na stanju traženih proizvoda</h2></div>')}function showProducts(){$.ajax({url:"assets/data/products.json",method:"GET",dataType:"json",success:function(t){getProducts(t),najtrazenije(t),dodajUkorpu()}})}function najtrazenije(t){let n="";t.forEach(t=>{t.cena<4e3&&(n+=`<div class="col-lg-4 col-md-6 col-sm-6 rounded-lg m-auto">\n                <div class="item-logo">\n                    <img src="${t.robnaMarka.slika}" alt="${t.robnaMarka.naziv}"/>\n                </div>\n                <div class="product-item">\n                    <img src="${t.slika}" alt="${t.opis}"/>\n                </div>\n                <div class="item-title text-center">\n                    <h3 class="text-uppercase">${t.naziv}</h3>\n                    <p>${t.opis}`,t.sezona.leto?n+='<span><i class="fas fa-sun text-warning"></i></span>':n+='<span><i class="fas fa-snowflake text-white"></i></span>',n+=`</p>\n                </div>\n                <div class="item-desc text-center">\n                    <h4>${t.dimenzije.sirina}/${t.dimenzije.visina} R${t.dimenzije.precnik}</h4>\n                    <div class="d-flex justify-content-center">\n                    <p class="text-success font-weight-bold h4">${t.cena} din</p></div>\n                    <a href="#"><button class="mb-3 dodajUkorpu" data-id=${t.id}><i class="fas fa-shopping-cart pl-2"></i> Dodaj u korpu</button></a>\n                </div>\n        </div>`)}),$("#najtrazeniji").html(n)}function showNavigation(){$.ajax({url:"assets/data/navigation.json",method:"GET",dataType:"json",success:function(t){navigation(t)}})}function navigation(t){let n="";for(let a of t)1==a.aktivan?n+=`<li><a class="aktivan" href="${a.putanja}">${a.ime}</a></li>`:n+=`<li><a href="${a.putanja}">${a.ime}</a></li>`;document.getElementById("meni").innerHTML=n,document.getElementById("srkivenMeni").innerHTML=n}function getProducts(t){let n="";t.forEach(t=>{n+=`<div class="col-lg-4 col-md-6 col-sm-6 rounded-lg m-auto pb-4">\n        <div class="item-logo">\n            <img src="${t.robnaMarka.slika}" alt="${t.robnaMarka.naziv}"/>\n        </div>\n        <div class="product-item">\n            <img src="${t.slika}" alt="${t.opis}"/>\n        </div>\n        <div class="item-title text-center">\n            <h3 class="text-uppercase">${t.naziv}</h3>\n            <p>${t.opis}`,t.sezona.leto?n+='<span><i class="fas fa-sun text-warning"></i></span>':n+='<span><i class="fas fa-snowflake text-white"></i></span>',n+=`</p>\n        </div>\n        <div class="item-desc text-center">\n            <h4>${t.dimenzije.sirina}/${t.dimenzije.visina} R${t.dimenzije.precnik}</h4>\n            <div class="d-flex justify-content-center">\n            <p class="text-success font-weight-bold h4 boja">${t.cena} din</p></div>\n            <a href="#"><button class="mb-3 dodajUkorpu" data-id=${t.id}><i class="fas fa-shopping-cart pl-2"></i> Dodaj u korpu</button></a>\n        </div>\n</div>`}),$("#proizvodi").html(n)}function showsBrands(){$("#marke").html()}function regexProvera(){let t,n,a,e,i,o,s,r,l,d;t=$("#ime").val().trim(),n=$("#prezime").val().trim(),a=$("#email").val().trim(),e=$("#naslov").val().trim(),i=$("#poruka").val().trim(),d=[],s=/^[\w\d\.]+@([a-z\.])+\.[a-z]{2,5}$/,r=/^[\w]{3,20}$/,l=/^.{15,}$/,(o=/^([A-ZŽĐŠ][a-zčćžšđ]{2,15}\s*)+$/).test(t)?$("#imeInfo").addClass("hide"):($("#imeInfo").removeClass("hide"),d.push(t)),o.test(n)?$("#prezimeInfo").addClass("hide"):($("#prezimeInfo").removeClass("hide"),d.push(n)),s.test(a)?$("#emailInfo").addClass("hide"):($("#emailInfo").removeClass("hide"),d.push(a)),r.test(e)?$("#naslovInfo").addClass("hide"):($("#naslovInfo").removeClass("hide"),d.push(e)),l.test(i)?$("#porukaInfo").addClass("hide"):($("#porukaInfo").removeClass("hide"),d.push(i)),d.length||(alert("Poruka uspešno poslata!"),location.reload())}function navSlide(){$("#sendvic").click(function(){$("#prikazi").find("ul").slideToggle()})}function scroll(){$("#scrollToTop").click(function(){$("html").animate({scrollTop:0},1e3)}),$("#scrollToTop").hide(),$(window).scroll(function(){let t=$("html").offset().top;(t=$(this)[0].scrollY)>500?$("#scrollToTop").show():$("#scrollToTop").hide()})}$(document).ready(function(){scroll(),navSlide(),showNavigation(),$(".zatvori").click(zatvori);var t=window.location.href;if(-1!==t.indexOf("index.html"))prikazRobneMarke(),showProducts();else if(-1!==t.indexOf("gume.html")){showProducts(),prikazRobneMarke(),$("#dropdownSort").click(function(){$("#prikaz").find("ul").slideToggle()});document.getElementById("tbDimenzije");$("#sezona").on("change",filtrirajPoSezoni),$("#proizvodjac").on("change",filtrirajPoMarki),$("#sortiraj").on("change",sortiraj),$("#rnCena").on("input",izmeniCenu),$("#filtriraj").on("click",filterCenaRN)}else if(-1!==t.indexOf("kontakt.html"))$("#btnKontakt").on("click",regexProvera);else if(-1!==t.indexOf("korpa.html")){proizvodiUKorpi().length?(prikaziProizvodeUKorpi(),$("#kupi").show()):praznaKorpa()}});